# Disable MFA on Development instances only


1. Create an instance
2. open web ssh, copy all the following, paste and run
  ```
  cd ~/htdocs; composer require markshust/magento2-module-disabletwofactorauth \
    && php bin/magento module:enable MarkShust_DisableTwoFactorAuth \
    && php bin/magento setup:upgrade \
    && php bin/magento deploy:mode:set production \
    && php bin/magento cache:flush
  ```
3. open the code editor, and edit the file `mdoq/post_roll_up_actions` in this file find the line
  ```
  "$ARGUMENT_STEP_FINAL-"*)
  ```
  Underneath it add the line
  ```
  php bin/magento config:set twofactorauth/general/enable 0 && php bin/magento cache:flush
  ```
  If that line does not exist but there are lines starting with `"$ARGUMENT_STEP_FINAL-` add the line under each
4.Use the git push functionality to push your changes.
 Your changes should be limited to the files
  - app/etc/config.php (optional)
  - composer.json (optional)
  - composer.lock (optional)
  - mdoq/post_roll_up_actions
5. sync code and db for the instance
6. confirim you can log into the MAP with the zero1dev user, and MFA is not requested.
7. if you pushed changes for the following files this will need a downtime release
  - app/etc/config.php (optional)
  - composer.json (optional)
  - composer.lock (optional)
  if you **only** changed `mdoq/post_roll_up_actions` it can be a zero downtime release
  
8. organise and release work.





## Additional notes
https://wiki.zero1.co.uk/en/magento2/2fa
https://docs.google.com/spreadsheets/d/1ustdy8wKHesxJBGWxtLtuopvisI85sq8vkziQTuydGQ/edit?usp=sharing
